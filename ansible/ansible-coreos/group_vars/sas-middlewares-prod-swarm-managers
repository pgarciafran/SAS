# Temporaly hardcoded until domain name resolution on the cloud
registry_adress: "192.168.1.145:5000"

docker_images:
  - repository: '/secandsys/docker-image-graylog.git'
    branch: 'master'
    directory: 'graylog'
    image_name: 'graylog'
    image_tag: 'v1-14'

  - repository: '/secandsys/docker-image-percona-official.git'
    branch: 'master'
    directory: 'percona'
    image_name: 'percona'
    image_tag: 'v1-1'

  - repository: '/secandsys/docker-image-proxy.git'
    branch: 'master'
    directory: 'proxy'
    image_name: 'proxy'
    image_tag: 'v1-4'
    build_args:
      PLATFORM: 'apptv.ch'

#  - repository: '/secandsys/docker-image-tcs.git'
#    branch: 'ref'
#    directory: 'tcs'
#    image_name: 'tcs'
#    image_tag: 'v2.8-1-dev'
#    build_args:
#      DEVEL: 1
#      TCS_VERSION: '2.8'
#      GIT_USER: 'Docker'
#      GIT_PASSWORD: 'GoXN7n6UFb'

#  - repository: '/secandsys/docker-image-tcs.git'
#    branch: 'ref'
#    directory: 'tcs'
#    image_name: 'tcs'
#    image_tag: 'v2.8-1'
#    build_args:
#      DEVEL: 0
#      TCS_VERSION: '2.8'
#      GIT_USER: 'Docker'
#      GIT_PASSWORD: 'GoXN7n6UFb'

  - repository: '/secandsys/docker-image-zabbix-agent.git'
    branch: 'master'
    directory: 'zabbix-agent'
    image_name: 'zabbix-agent'
    image_tag: 'v1-6-dev-5'

  - repository: '/secandsys/docker-image-zabbix-server-xxl.git'
    branch: 'master'
    directory: 'zabbix-server'
    image_name: 'zabbix-server'
    image_tag: 'v1-8'

  - repository: '/secandsys/docker-image-zabbix-server-docker-module.git'
    directory: 'zabbix-docker-module'
    image_name: 'zabbix-docker-module'
    image_tag: 'test'

  - repository: '/secandsys/docker-image-shipyard.git'
    branch: 'master'
    directory: 'shipyard'
    image_name: 'shipyard'
    image_tag: 'v1-1'

  - repository: '/secandsys/docker-image-backup.git'
    branch: 'master'
    directory: 'backup'
    image_name: 'backup'
    image_tag: 'v1-2'


docker_composes:
  - compose_name: 'databases'
    repository: '/secandsys/docker-compose-databases.git'
    branch: 'master'
    directory: 'databases'
    compose_args:
      PERCONA_IMAGE_VERSION: v1-1
      ETCD_HOST: proxy:80
      DATABASES_NETWORK_NAME: databases_database
      CLUSTER_NAME: sas
      MYSQL_PASSWORD: broza
      LOGGING_HOST: "127.0.0.1:20000"
      REGISTRY_HOST: 192.168.249.240
      MANAGEMENT_ADDRESS: 192.168.116.54
    scale:
      percona: 3
      phpmyadmin: 1

  - compose_name: 'middlewares'
    compose_project: 'customer'
    repository: '/secandsys/docker-compose-middlewares.git'
    branch: 'master'
    directory: 'middlewares'
    compose_args:
      TCS_IMAGE_VERSION: v1.4-1
      REPORTING_IMAGE_VERSION: v2.15-1
      PLATFORM_NAME: liwest
      HTTPS: true
      WEBTV_TITLE: "LIWEST TV App"
      WEBTV_LOGO_URL: "/tcs/upload/resource/Liwest_App_icon_MobileTV_1024px.png"
      TCS_COMPANY_NAME: "LIWEST"
      TCS_COMPANY_LOGO: "Liwest_App_icon_MobileTV_1024px.png"
      TCS_COMPANY_URL: ""
      ETCD_HOST: proxy
      REGISTRY_HOST: 192.168.249.240
      LOGGING_HOST: "127.0.0.1:20000"
      IPNETCOM_DB_USER: liwest
      IPNETCOM_DB_PASSWORD: sSPAsqg2tJ4XAPvP
      IPNETCOM_DB_NAME: liwest
      IPNETCOM_DB_ZABBIX: zabbix
      IPNETCOM_DOMAINNAME: liwest.apptv.ch
      IPNETCOM_BDS_USER: bds
      IPNETCOM_BDS_PASSWORD: bds
      IPNETCOM_BDS_NAME: bds
      REPORTING_DOMAINNAME: liwest-reporting.apptv.ch
      REPORTING_NODE: APPTV-C1-S1
    scale:
      tcs: 2
      reporting: 1

  - compose_name: 'middlewares-2'
    compose_project: 'custormer2'
    repository: '/secandsys/docker-compose-middlewares.git'
    branch: 'master'
    directory: 'middlewares'
    compose_args:
      TCS_IMAGE_VERSION: v1.4-1
      REPORTING_IMAGE_VERSION: v2.15-1
      PLATFORM_NAME: ropa
      HTTPS: true
      WEBTV_TITLE: "Ropa TV App"
      WEBTV_LOGO_URL: "/tcs/upload/resource/Ropa_icon.png"
      TCS_COMPANY_NAME: "AiMS"
      TCS_COMPANY_LOGO: "ropa-logo-1024.png"
      TCS_COMPANY_URL: ""
      ETCD_HOST: proxy
      REGISTRY_HOST: 192.168.249.240
      LOGGING_HOST: "127.0.0.1:20000"
      IPNETCOM_DB_USER: ropa
      IPNETCOM_DB_PASSWORD: v7zRpArSs8JH4n3z
      IPNETCOM_DB_NAME: ropa
      IPNETCOM_DB_ZABBIX: zabbix
      IPNETCOM_DOMAINNAME: "aims.apptv.ch swk.apptv.ch ropa.apptv.ch"
      IPNETCOM_BDS_USER: bds
      IPNETCOM_BDS_PASSWORD: bds
      IPNETCOM_BDS_NAME: bds
      REPORTING_DOMAINNAME: ropa-reporting.apptv.ch
      REPORTING_NODE: APPTV-C1-S1
    scale:
      tcs: 2
      reporting: 1

  - compose_name: 'proxies'
    repository: '/secandsys/docker-compose-web-services.git'
    branch: 'master'
    directory: 'proxies'
    compose_args:
      PROXY_IMAGE_VERSION: v1-3-rc4
      ETCD_HOST: proxy:80
      ETCD_HOSTS: 192.168.249.10,192.168.249.11,192.168.249.12
      REGISTRY_HOST: 192.168.249.240
      LOGGING_HOST: "127.0.0.1:20000"
      NODE: APPTV-C1-S1
    scale:
      proxy: 2
 
  - compose_name: 'graylog'
    repository: '/secandsys/docker-compose-graylog.git'
    branch: 'master'
    directory: 'graylog'
    compose_args:
      NODE: APPTV-C1-S1
      ETCD_HOST: proxy:80
      GRAYLOG_PASSWORD_SECRET: .mar10n3t4.mar10n3t4
      GRAYLOG_ROOT_PASSWORD_SHA2: 81b70f04cf4381b8b373194ac244fdd7533f4d1eb8f6dd7c2b72dbba4f306d2d
      REGISTRY_HOST: 192.168.249.240
      GRAYLOG_IMAGE_VERSION: v1-14
      IPNETCOM_DOMAINNAME: graylog.apptv.ch
      LOGGING_PORT: 20000
      GRAYLOG_HOST: "graylog:12201"
    scale:
      graylog-mongodb: 1
      graylog-elasticsearch: 1
      graylog: 1
      logging-proxy: 3 # This service is global. At the moment, as Docker version 1.12.6 and 3 nodes, it's set up in this way

  - compose_name: 'shipyard'
    repository: '/secandsys/docker-compose-shipyard.git'
    branch: 'master'
    directory: 'shipyard'
    compose_args:
      NODE: APPTV-C1-S1
      ETCD_HOST: proxy:80
      REGISTRY_HOST: 192.168.249.240
      LOGGING_HOST: "127.0.0.1:20000"
      SHIPYARD_IMAGE_VERSION: v1-1
      IPNETCOM_DOMAINNAME: shipyard.apptv.ch
      SWARM_MANAGER_HOST: 192.168.249.10
    scale:
      shipyard-rethinkdb: 1
      shipyard-controller: 1

  - compose_name: 'zabbix'
    repository: '/secandsys/docker-compose-zabbix.git'
    branch: 'master'
    directory: 'zabbix'
    compose_args:
      NODE: APPTV-C1-S1
      ETCD_HOST: proxy:80
      REGISTRY_HOST: 192.168.249.240
      LOGGING_HOST: "127.0.0.1:20000"
      ZABBIX_SERVER_IMAGE_VERSION: v1-8
      ZABBIX_AGENT_IMAGE_VERSION: v1-7
      IPNETCOM_DOMAINNAME: zabbix.apptv.ch
      ZS_DBUser: zabbix
      ZS_DBPassword: broza
      ZBX_HOST_PRIVATE_IP: 192.168.249.10
      ETCD_HOST_WITHOUT_PORT: proxy
      ETCD_PROXY_PORT: 20001
    scale:
      zabbix-server: 1
      zabbix-agent: 3 # This service is global. At the moment, as Docker version 1.12.6 and 3 nodes, it's set up in this way
      etcd-proxy: 3

  - compose_name: 'backup'
    repository: '/secandsys/docker-compose-backup.git'
    branch: 'master'
    directory: 'backup'
    compose_args:
      EXTERNAL_IMAGE_VERSION: v1-2
      NODE: APPTV-C1-S1
      ETCD_HOST: proxy:80
      REGISTRY_HOST: 192.168.249.240
      MYSQL_DATABASES: "liwest_tcs,liwest_sts"
      LOGGING_HOST: 127.0.0.1:20000
      MYSQL_USERNAME: root
      MYSQL_PASSWORD: broza
    scale:
      external: 1

